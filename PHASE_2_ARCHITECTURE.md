# Phase 2 Architecture Diagram

## System Overview

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                         SCAMSHIELD AI SYSTEM                             â”‚
â”‚                                                                          â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                        USER INTERFACES                              â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚  â”‚  â”‚   Phase 1 UI     â”‚              â”‚   Phase 2 UI     â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  (index.html)    â”‚              â”‚  (voice.html)    â”‚            â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚              â”‚                  â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  Text Chat       â”‚              â”‚  ğŸ¤ Voice Chat   â”‚            â”‚ â”‚
â”‚  â”‚  â”‚  Interface       â”‚              â”‚  Interface       â”‚            â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚              â”‚                                 â”‚                        â”‚
â”‚              â”‚ HTTP/JSON                       â”‚ HTTP/FormData          â”‚
â”‚              â”‚                                 â”‚                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚                                 â”‚
               â–¼                                 â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                            API LAYER                                      â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚  Phase 1 Endpoints     â”‚         â”‚  Phase 2 Endpoints     â”‚          â”‚
â”‚  â”‚  (endpoints.py)        â”‚         â”‚  (voice_endpoints.py)  â”‚          â”‚
â”‚  â”‚                        â”‚         â”‚                        â”‚          â”‚
â”‚  â”‚  POST /honeypot/engage â”‚         â”‚  POST /voice/engage    â”‚          â”‚
â”‚  â”‚  GET  /honeypot/sessionâ”‚         â”‚  GET  /voice/audio/:id â”‚          â”‚
â”‚  â”‚  POST /honeypot/batch  â”‚         â”‚  GET  /voice/health    â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                   â”‚
                â”‚                                   â”‚
                â”‚                                   â–¼
                â”‚                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â”‚                    â”‚   Phase 2 Voice Layer    â”‚
                â”‚                    â”‚                          â”‚
                â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                â”‚                    â”‚  â”‚  Audio Upload      â”‚  â”‚
                â”‚                    â”‚  â”‚  (multipart/form)  â”‚  â”‚
                â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                â”‚                    â”‚            â”‚             â”‚
                â”‚                    â”‚            â–¼             â”‚
                â”‚                    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
                â”‚                    â”‚  â”‚  ASR Engine        â”‚  â”‚
                â”‚                    â”‚  â”‚  (Whisper)         â”‚  â”‚
                â”‚                    â”‚  â”‚                    â”‚  â”‚
                â”‚                    â”‚  â”‚  Audio â†’ Text      â”‚  â”‚
                â”‚                    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
                â”‚                    â”‚            â”‚             â”‚
                â”‚                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â”‚                                 â”‚
                â”‚                                 â”‚ Transcribed Text
                â”‚                                 â”‚
                â–¼â—„â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PHASE 1 CORE (UNCHANGED)                              â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      DETECTION LAYER                                 â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚ Language Detectorâ”‚    â”‚  Scam Detector   â”‚    â”‚  Scam Type   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  (language.py)   â”‚â”€â”€â”€â–¶â”‚  (detector.py)   â”‚â”€â”€â”€â–¶â”‚  Classifier  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚                  â”‚    â”‚                  â”‚    â”‚              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  Auto-detect     â”‚    â”‚  IndicBERT +     â”‚    â”‚  Financial   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  en/hi/gu/etc    â”‚    â”‚  Rules-based     â”‚    â”‚  Tech Supportâ”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚  Impersonationâ”‚ â”‚
â”‚  â”‚                                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚                                 â”‚
â”‚                                         â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                      HONEYPOT LAYER                                  â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚              LangGraph Workflow                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Plan   â”‚â”€â”€â”€â”€â”€â–¶â”‚Generate â”‚â”€â”€â”€â”€â”€â–¶â”‚ Extract â”‚             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â”‚  Node   â”‚      â”‚  Node   â”‚      â”‚  Node   â”‚             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚                 â”‚                 â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚                 â–¼                 â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚           â”‚ Groq LLM â”‚            â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚           â”‚ (Llama)  â”‚            â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â”‚                                   â”‚                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                      â”‚                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                      â–¼                                      â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚ State Manager â”‚                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â”‚  (Redis)      â”‚                             â”‚  â”‚ â”‚
â”‚  â”‚  â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  Output: Text Reply                                                 â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                         â”‚                                 â”‚
â”‚                                         â–¼                                 â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚                    EXTRACTION LAYER                                  â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”             â”‚ â”‚
â”‚  â”‚  â”‚ UPI Extractorâ”‚  â”‚ Bank Account â”‚  â”‚ Phone/URL    â”‚             â”‚ â”‚
â”‚  â”‚  â”‚  (Regex)     â”‚  â”‚  Extractor   â”‚  â”‚  Extractor   â”‚             â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚ â”‚
â”‚  â”‚                                                                      â”‚ â”‚
â”‚  â”‚  Output: Extracted Intelligence                                     â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ Text Reply
                                          â”‚
                                          â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                     PHASE 2 OUTPUT LAYER                                  â”‚
â”‚                                                                           â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚                    TTS Engine (gTTS)                                â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  Text Reply â”€â”€â”€â–¶ Text-to-Speech â”€â”€â”€â–¶ Audio File (.mp3)            â”‚  â”‚
â”‚  â”‚                                                                     â”‚  â”‚
â”‚  â”‚  Languages: en, hi, gu, ta, te, bn, mr                             â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”‚                                                                           â”‚
â”‚  Output: Audio URL                                                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                          â”‚
                                          â”‚ Audio URL
                                          â”‚
                                          â–¼
                                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                    â”‚  User    â”‚
                                    â”‚  Hears   â”‚
                                    â”‚  AI Voiceâ”‚
                                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Data Flow: Voice Conversation

### Step-by-Step Flow

```
1. USER SPEAKS
   â”‚
   â”‚ "Your account is blocked. Send OTP now!"
   â”‚
   â–¼
2. BROWSER CAPTURES AUDIO
   â”‚
   â”‚ MediaRecorder API â†’ WebM/WAV blob
   â”‚
   â–¼
3. UPLOAD TO API
   â”‚
   â”‚ POST /api/v1/voice/engage
   â”‚ FormData: audio_file, session_id, language
   â”‚
   â–¼
4. ASR (WHISPER)
   â”‚
   â”‚ Audio â†’ Text Transcription
   â”‚ Output: "Your account is blocked. Send OTP now!"
   â”‚ Language: "en"
   â”‚ Confidence: 0.95
   â”‚
   â–¼
5. PHASE 1 DETECTION (UNCHANGED)
   â”‚
   â”‚ Input: Transcribed text
   â”‚ Scam Detector â†’ is_scam: true, confidence: 0.92
   â”‚ Type: "financial_fraud"
   â”‚
   â–¼
6. PHASE 1 HONEYPOT (UNCHANGED)
   â”‚
   â”‚ LangGraph Workflow:
   â”‚   - Plan: Select "confused_elderly" persona
   â”‚   - Generate: Groq LLM creates reply
   â”‚   - Extract: Parse for UPI/bank/phone
   â”‚
   â”‚ Output: "Oh no! What should I do? I'm scared!"
   â”‚
   â–¼
7. TTS (gTTS)
   â”‚
   â”‚ Text â†’ Speech Synthesis
   â”‚ Input: "Oh no! What should I do? I'm scared!"
   â”‚ Language: "en"
   â”‚ Output: /tmp/reply_xyz.mp3
   â”‚
   â–¼
8. RESPONSE TO USER
   â”‚
   â”‚ JSON Response:
   â”‚ {
   â”‚   "ai_reply_text": "Oh no! What should I do?",
   â”‚   "ai_reply_audio_url": "/api/v1/voice/audio/reply_xyz.mp3",
   â”‚   "transcription": {...},
   â”‚   "scam_detected": true,
   â”‚   ...
   â”‚ }
   â”‚
   â–¼
9. BROWSER PLAYS AUDIO
   â”‚
   â”‚ <audio controls src="/api/v1/voice/audio/reply_xyz.mp3">
   â”‚
   â–¼
10. USER HEARS AI VOICE
    â”‚
    â”‚ "Oh no! What should I do? I'm scared!"
    â”‚
    â””â”€â–¶ Loop continues for multi-turn conversation
```

## Component Isolation

### Phase 1 (Existing - Untouched)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PHASE 1 COMPONENTS           â”‚
â”‚                                     â”‚
â”‚  âœ… app/models/detector.py          â”‚
â”‚  âœ… app/models/language.py          â”‚
â”‚  âœ… app/models/extractor.py         â”‚
â”‚  âœ… app/agent/honeypot.py           â”‚
â”‚  âœ… app/agent/personas.py           â”‚
â”‚  âœ… app/agent/strategies.py         â”‚
â”‚  âœ… app/api/endpoints.py            â”‚
â”‚  âœ… app/api/schemas.py              â”‚
â”‚  âœ… ui/index.html                   â”‚
â”‚  âœ… ui/app.js                       â”‚
â”‚                                     â”‚
â”‚  NO MODIFICATIONS REQUIRED          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Phase 2 (New - Isolated)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        PHASE 2 COMPONENTS           â”‚
â”‚                                     â”‚
â”‚  ğŸ†• app/voice/asr.py                â”‚
â”‚  ğŸ†• app/voice/tts.py                â”‚
â”‚  ğŸ†• app/voice/fraud_detector.py     â”‚
â”‚  ğŸ†• app/api/voice_endpoints.py      â”‚
â”‚  ğŸ†• app/api/voice_schemas.py        â”‚
â”‚  ğŸ†• ui/voice.html                   â”‚
â”‚  ğŸ†• ui/voice.js                     â”‚
â”‚  ğŸ†• ui/voice.css                    â”‚
â”‚                                     â”‚
â”‚  COMPLETELY SEPARATE                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Integration Points (Minimal)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      INTEGRATION POINTS             â”‚
â”‚                                     â”‚
â”‚  ğŸ“ app/main.py                     â”‚
â”‚     + Add voice router (conditional)â”‚
â”‚                                     â”‚
â”‚  ğŸ“ app/config.py                   â”‚
â”‚     + Add Phase 2 settings          â”‚
â”‚                                     â”‚
â”‚  ğŸ“ .env                            â”‚
â”‚     + Add PHASE_2_ENABLED=true      â”‚
â”‚                                     â”‚
â”‚  MINIMAL CHANGES                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Optional: Voice Fraud Detection

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              VOICE FRAUD DETECTION (OPTIONAL)                 â”‚
â”‚                                                               â”‚
â”‚  Audio Input                                                  â”‚
â”‚      â”‚                                                        â”‚
â”‚      â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚      â”‚                                      â”‚                â”‚
â”‚      â–¼                                      â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚   ASR   â”‚                          â”‚ Fraud   â”‚           â”‚
â”‚  â”‚(Whisper)â”‚                          â”‚Detector â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜                          â”‚(Wav2Vec2â”‚           â”‚
â”‚       â”‚                               â”‚resemb.) â”‚           â”‚
â”‚       â”‚                               â””â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜           â”‚
â”‚       â”‚                                    â”‚                â”‚
â”‚       â”‚ Transcribed Text                   â”‚ Fraud Score    â”‚
â”‚       â”‚                                    â”‚                â”‚
â”‚       â–¼                                    â–¼                â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚         Combined Analysis                     â”‚          â”‚
â”‚  â”‚                                               â”‚          â”‚
â”‚  â”‚  - Text content (scam detection)              â”‚          â”‚
â”‚  â”‚  - Voice authenticity (fraud detection)       â”‚          â”‚
â”‚  â”‚                                               â”‚          â”‚
â”‚  â”‚  Risk Score = f(scam_conf, fraud_conf)        â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”‚                                                              â”‚
â”‚  If VOICE_FRAUD_DETECTION=true                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Database & State Management

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   STATE PERSISTENCE                          â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚      Redis           â”‚         â”‚     PostgreSQL       â”‚ â”‚
â”‚  â”‚  (Session State)     â”‚         â”‚  (Conversation Logs) â”‚ â”‚
â”‚  â”‚                      â”‚         â”‚                      â”‚ â”‚
â”‚  â”‚  - Active sessions   â”‚         â”‚  - Full transcripts  â”‚ â”‚
â”‚  â”‚  - Turn count        â”‚         â”‚  - Extracted intel   â”‚ â”‚
â”‚  â”‚  - Extracted intel   â”‚         â”‚  - Audio metadata    â”‚ â”‚
â”‚  â”‚  - Persona state     â”‚         â”‚  - Timestamps        â”‚ â”‚
â”‚  â”‚  - TTL: 1 hour       â”‚         â”‚  - Permanent storage â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  SAME AS PHASE 1 - NO CHANGES                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Performance Considerations

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    LATENCY BREAKDOWN                         â”‚
â”‚                                                              â”‚
â”‚  User Speaks (5s audio)                                      â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  Upload to API (0.5s)                                        â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  ASR Transcription (1.5s)  â—„â”€â”€ Whisper base model           â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  Scam Detection (0.2s)     â—„â”€â”€ IndicBERT                    â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  Honeypot LLM (1.0s)       â—„â”€â”€ Groq API                     â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  TTS Synthesis (0.8s)      â—„â”€â”€ gTTS                         â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  Download Audio (0.3s)                                       â”‚
â”‚      â”‚                                                       â”‚
â”‚      â–¼                                                       â”‚
â”‚  Total: ~4.3s                                                â”‚
â”‚                                                              â”‚
â”‚  Target: <5s âœ…                                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Deployment Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      DEPLOYMENT                              â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚              Docker Container                           â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚         FastAPI Application                       â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Phase 1 Endpoints (always enabled)            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Phase 2 Endpoints (if PHASE_2_ENABLED=true)   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  Dependencies:                                    â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - Base: transformers, langchain, groq         â”‚  â”‚ â”‚
â”‚  â”‚  â”‚    - Phase 2: whisper, gTTS, torchaudio          â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â”‚                                                         â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚ â”‚
â”‚  â”‚  â”‚         Model Cache                               â”‚  â”‚ â”‚
â”‚  â”‚  â”‚                                                   â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - IndicBERT (~500MB)                            â”‚  â”‚ â”‚
â”‚  â”‚  â”‚  - Whisper base (~150MB) [Phase 2]               â”‚  â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                              â”‚
â”‚  External Services:                                          â”‚
â”‚  - Redis (session state)                                     â”‚
â”‚  - PostgreSQL (conversation logs)                            â”‚
â”‚  - Groq API (LLM)                                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## Security Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SECURITY LAYERS                           â”‚
â”‚                                                              â”‚
â”‚  1. API Authentication                                       â”‚
â”‚     â””â”€â–¶ x-api-key header (both Phase 1 & 2)                 â”‚
â”‚                                                              â”‚
â”‚  2. Input Validation                                         â”‚
â”‚     â”œâ”€â–¶ File size limits (<10MB)                            â”‚
â”‚     â”œâ”€â–¶ File type validation (audio/* only)                 â”‚
â”‚     â””â”€â–¶ Sanitize filenames                                  â”‚
â”‚                                                              â”‚
â”‚  3. Rate Limiting                                            â”‚
â”‚     â””â”€â–¶ Max requests per session                            â”‚
â”‚                                                              â”‚
â”‚  4. Data Privacy                                             â”‚
â”‚     â”œâ”€â–¶ Temporary audio storage                             â”‚
â”‚     â”œâ”€â–¶ Auto-delete after processing                        â”‚
â”‚     â””â”€â–¶ No raw audio in database                            â”‚
â”‚                                                              â”‚
â”‚  5. Error Handling                                           â”‚
â”‚     â””â”€â–¶ No sensitive info in error messages                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## Key Takeaways

1. **Phase 2 wraps Phase 1**: Voice is input/output layer only
2. **Zero modifications to Phase 1**: Core honeypot unchanged
3. **Conditional loading**: Phase 2 only loads if enabled
4. **Separate UI**: Voice UI is independent of text UI
5. **Same state management**: Reuses Redis/PostgreSQL
6. **Performance target**: <5s for full voice loop
7. **Security first**: Audio files temporary, validated, rate-limited

---

**For detailed implementation steps, see:** `PHASE_2_VOICE_IMPLEMENTATION_PLAN.md`

**For quick start guide, see:** `PHASE_2_README.md`

**For progress tracking, see:** `PHASE_2_CHECKLIST.md`
